{
    "name": "ROS 2 Jazzy + XFCE + VNC",
    "dockerComposeFile": [
      "../docker-compose.yml"
    ],
    "service": "ros2-jazzy-xfce",
    "workspaceFolder": "/home/ubuntu/ros2_ws",
  
    // üß∞ Features: official VS Code Dev Container features
    "features": {
      "ghcr.io/devcontainers/features/git:1": {},
      "ghcr.io/devcontainers/features/common-utils:2": {
        "username": "ubuntu",
        "nonFreePackages": true,
        "installZsh": false
      },
      "ghcr.io/devcontainers/features/python:1": {
        "version": "3.10"
      }
    },
  
    // üß† VS Code settings inside the container
    "settings": {
      "terminal.integrated.defaultProfile.linux": "bash",
      "python.analysis.autoImportCompletions": true,
      "python.analysis.useLibraryCodeForTypes": true,
      "python.defaultInterpreterPath": "/usr/bin/python3",
      "ros.distro": "jazzy",
      "editor.formatOnSave": true,
      "files.eol": "\n"
    },
  
    // ‚úÖ Automatically install useful extensions
    "extensions": [
      "ms-python.python",
      "ms-iot.vscode-ros",
      "ms-azuretools.vscode-docker",
      "twxs.cmake",
      "ms-vscode.cmake-tools",
      "ms-vscode.cpptools-extension-pack"
    ],
  
    // üèóÔ∏è Optional build args and environment variables
    "build": {
      "args": {
        "INSTALL_PACKAGE": "ros-base"
      }
    },
    "containerEnv": {
      "ROS_DISTRO": "jazzy",
      "DISPLAY": ":1",
      "VNC_PORT": "5901",
      "VNC_GEOMETRY": "1600x900",
      "VNC_DEPTH": "24",
      "USER": "ubuntu",
      "PASSWORD": "ubuntu"
    },
  
    // üß© Mounts your workspace and ROS directories
    "mounts": [
      "source=${localWorkspaceFolder}/ros2_ws,target=/home/ubuntu/ros2_ws,type=bind",
      "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind"
    ],
  
    // üîß Run these after the container starts
    "postCreateCommand": "sudo rosdep update || true",
  
    // üîå Forward VNC ports for local access
    "forwardPorts": [5901],
  
    // ü™ü Optional GUI preview (if using noVNC)
    "portsAttributes": {
      "5901": {
        "label": "VNC Display"
      }
    },
  
    // üê≥ Run as the non-root user
    "remoteUser": "ubuntu"
  }
  